@{
    ViewData["Title"] = "Chief Curators";
}
<script src="~/Scripts/jquery-3.1.1.min.js"></script>
<script src="~/Scripts/bootstrap.min.js"></script>
<script src="~/Scripts/plugins/footable/footable.all.min.js"></script>
<link href="~/Content/footable/footable.core.css" rel="stylesheet" />
<script type="text/javascript">
    const apiBaseUrls = "https://curation.kec.ac.ke";
</script>
<div id="wrapper">
    <div class="row">
        <div class="col-lg-12">
            <div class="text-center m-t-lg">
                <h1>
                    @ViewData["SubTitle"]
                </h1>
                <small>@ViewData["Message"]</small>
            </div>
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>Search For A User</h5>
                </div>
                <div class="ibox-content">
                    <input type="text" class="form-control input-sm m-b-xs" id="filter" placeholder="Search in table">
                    <table id="allpublications" class="footable table table-stripped" data-page-size="15" data-filter="#filter">

                        <tr class="footable-sortable">
                            <th> NAME </th>
                            <th> EMAIL </th>
                            <th> ACTION </th>
                        </tr>

                        <tfoot>
                            <tr>
                                <td colspan="3">
                                    <ul class="pagination pull-right"></ul>
                                </td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>
        <div class="form-group ">


        </div>
    </div>
    <div class="footer" style="">
        <strong>Copyright</strong> Kenya Education Cloud &copy; 2018
    </div>
</div>
<script type="text/javascript">
    let Url = apiBaseUrls.concat(`/GetUSers/GetChiefCuratorsList`);
    function tableRows(data) {
        var tableRows = [];
        for (var i = 0; i < data.length; i++) {
            tableRows.push(drawRow(data[i]));
        }
        return tableRows;
    };
    $.ajax({
        url: Url,
        type: "POST",
        dataType: "json",
        success: function (data, status, jqhxr) {
            console.log(data);
            //This code snipet prepares to append Json Data
            $('#allpublications').append(tableRows(data));
        }
    });
    //This functionpopulates the tbody inner HTML with json data on call
    function drawRow(rowData) {
        var row = $('<tr class="footable-sortable" />')
        //row.append($(`<td class="hidden"> + rowData.Id + </td>`));
        row.append($("<td>" + rowData.Value + "</td>"));
        row.append($("<td>" + rowData.Text + "</td>"));
        row.append($(`<td> <a href="/Role/RemoveFromRole?Id=${rowData.Text}&Role=${rowData.Value}" class="btn btn-w-m btn-info" style="background-color:#00B95F;" role="button">Remove From Role</a>`));

        return row[0];
    };

</script>
@section Styles {
    @Styles.Render("~/plugins/footableStyles")
}

@section Scripts {
    @Scripts.Render("~/plugins/footable")

    <script type="text/javascript">
        $(document).ready(function () {

            $('.footable').footable();
            $('.footable2').footable();

        });
    </script>
}