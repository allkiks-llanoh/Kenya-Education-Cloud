@using KEC.Curation.UI.Models;
@model ChiefCurators
@{
    ViewBag.Title = "Assign";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link href="~/Content/CustomStyles/DocumentViewer.css" rel="stylesheet" />
@section Scripts
{
    @Scripts.Render("~/js/chiefCuratorAssignPublication.js")
    <script src="@Url.Content("~/js/UpdateFullyAssign.js")"></script>
    <script src="@Url.Content("~/js/GetCurators.js")"></script>
}
@{
    var Urls = Request.Params["Urls"];
    var Type = Request.Params["MimeType"];
}

<div class="wrapper wrapper-content animated fadeInRight" id="publication-view" data-publicationId="@ViewBag.PublicationId">
    <div class="wrapper wrapper-content animated fadeIn">
        <div class="row">
            <div class="col-lg-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5><i class="fa fa-book"></i> Publication Details</h5>
                        <div class="ibox-tools">
                            <a class="collapse-link">
                                <i class="fa fa-chevron-up"></i>
                            </a>
                        </div>
                    </div>
                    <div class="ibox-content">
                        <dl id="publication-details"></dl>
                    </div>
                    <div class="ibox-footer">
                        Publication Details
                    </div>
                </div>
            </div>
            @*-------------------------------------html starts here-------------------------------------*@
            <div id="html" class="panel-body ">
                <div id="showHtml" class="hidden">
                    <div>
                        <iframe allowfullscreen="true" webkitallowfullscreen="true" style="height:600px;width:100%;"
                                src='@Urls'></iframe>
                    </div>
                </div>
            </div>
            @*--------------------------------------html ends here--------------------------------------*@
            @*--------------------------------------epub starts here------------------------------------*@
            <div id="epub" class="panel-body">
                <div id="showEpub" class="hidden">
                    <div>
                        <iframe allowfullscreen="true" webkitallowfullscreen="true" style="height:600px;width:100%;"
                                src='@Url.Content("~/Readium/cloud-reader/index.html?epub=" +Urls)'></iframe>
                    </div>
                </div>
            </div>
            @*------------------------------------epub ends here-------------------------------------*@
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>New Curator assignments</h5>
                    </div>
                    <div class="ibox-content">
                        <div class="form-group">
                            <label for="unassigned-curator">Curator:</label>
                            <input placeholder="Start typing curators name..." class="form-control m-b hidden" id="unassigned-curator" style="" type="text">
                            <select name="UserGuid" id="UserGuid" class="col-md-8 form-control" style="color:black; margin-left:15px;"></select>
                        </div>
                        <div class="form-group">
                            <label for="section-assigned">Section:</label>
                            <input placeholder="Section assigned..." class="form-control m-b" id="section-assigned" style="" type="text">
                        </div>
                        <div class="form-group hidden">
                            <label class="form-check-label form-control">
                                Fully Assigned:
                                <input type="checkbox" class="form-check-input" id="fully-assigned" />
                            </label>
                        </div>
                        <div class="row">
                            <div class="form-group col-md-6">
                                <a href="#" class="btn btn-primary" style="background-color:#00B85F;" data-toggle="modal" data-target="#assign">Assign curator</a>
                            </div>
                            <div class="form-group col-md-6">
                                <a href="#" class="btn btn-info" id="fully-assign">Mark as Fully Assigned</a>
                            </div>
                        </div>
                        <div class="modal inmodal" id="assign" tabindex="-1" role="dialog" aria-hidden="true" style="display: none;">
                            <div class="modal-dialog modal-sm">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
                                        <h4 class="modal-title">Confirm Submission</h4>
                                    </div>
                                    <div class="modal-body">
                                        <p>
                                            Are you sure you want to assign this curator?
                                        </p>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-white" data-dismiss="modal">No</button>
                                        <button type="button" id="assign-curator" class="btn btn-primary">Yes</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>Listing Curator assignments</h5>
                    </div>
                    <div class="ibox-content">
                        @*<div class="table-responsive">
                                <table class="table table-striped table-bordered table-hover dataTables-example"
                                       data-publicationurl="@ViewBag.AssignPublicationUrl" id="publications-to-curate">
                                    <thead>
                                        <tr>
                                            <th>Publication</th>
                                            <th>Curator</th>
                                            <th>Section</th>
                                            <th>Assignment Date</th>
                                            <th>Action</th>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>*@
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="form-group col-md-10">
    <input type="text" name="CurrentUserGuid" id="CurrentUserGuid" class="form-control hidden" value="@Model.Guid">
</div>
<div class="form-group col-md-10">
    <input type="text" name="SubjectId" id="SubjectId" class="form-control hidden" value="@Model.Subjectid">
    <input type="text" name="MimeTypeCheck" id="MimeTypeCheck" class="form-control hidden" value="@Type" />
</div>

<script src="~/Scripts/jquery-3.1.1.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        let uICheck = $('#MimeTypeCheck').val();
        if (uICheck == "application/epub zip") {
            $('#showEpub').toggleClass('hidden');
        }
        if (uICheck == "application/x-zip-compressed") {
            $('#showHtml').toggleClass('hidden');
        }
    });
</script>