@using KEC.Curation.PublishersUI.Models;
@model Publishers
@{
    ViewBag.Title = "Approved";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="jumbotron text-center" style="margin-top:-20px;margin-bottom:-20px;">
    <h2>Publication Status</h2>
</div>
@*<div>
    <h2 style="text-align:center;">
        <i class="fa fa-exclamation-triangle"></i> Nothing to Display
    </h2>
</div>*@
<div class="tabs-container">
    <ul class="nav nav-tabs">
        <li class="active"><a data-toggle="tab" href="#tab-approved" style="background-color:#00af57; color:white;" aria-expanded="true">Your Approved Publications</a></li>
        <li class=""><a data-toggle="tab" href="#tab-conditional" style="background-color:black; color:white;" aria-expanded="false">Your Conditionally Approved Publications</a></li>
        <li class=""><a data-toggle="tab" href="#tab-rejected" style="background-color:red; color:white;" aria-expanded="false">Your Rejected Publications</a></li>
    </ul>
    <div class="tab-content">
        <div id="tab-approved" class="tab-pane active">
            <div class="panel-body">
                <div class="wrapper wrapper-content animated fadeInRight">
                    <div class="row">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="ibox float-e-margins">

                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="ibox float-e-margins">
                                    <div class="ibox-title">
                                        <h5>Listing Your Approved Publications</h5>
                                    </div>
                                    <div class="ibox-content">
                                        <div class="table-responsive">
                                            <table class="table table-striped table-bordered table-hover dataTables-example" id="approved-List">
                                                <thead>
                                                    <tr>
                                                        <th>Title</th>
                                                        <th>Publication</th>
                                                        <th>Comments</th>
                                                    </tr>
                                                </thead>
                                                <tbody></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="tab-conditional" class="tab-pane">
            <div class="panel-body">
                <div class="wrapper wrapper-content animated fadeInRight">
                    <div class="row">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="ibox float-e-margins">

                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="ibox float-e-margins">
                                    <div class="ibox-title">
                                        <h5>Listing Conditionally Approved Publications</h5>
                                    </div>
                                    <div class="ibox-content">
                                        <div class="table-responsive">
                                            <table class="table table-striped table-bordered table-hover dataTables-example" id="conditional-List">
                                                <thead>
                                                    <tr>
                                                        <th>Title</th>
                                                        <th>Publication</th>
                                                        <th>Comments</th>
                                                    </tr>
                                                </thead>
                                                <tbody></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="tab-rejected" class="tab-pane">
            <div class="panel-body">
                <div class="wrapper wrapper-content animated fadeInRight">
                    <div class="row">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="ibox float-e-margins">

                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="ibox float-e-margins">
                                    <div class="ibox-title">
                                        <h5>Listing Your Rejected Publications</h5>
                                    </div>
                                    <div class="ibox-content">
                                        <div class="table-responsive">
                                            <table class="table table-striped table-bordered table-hover dataTables-example" id="rejected-List">
                                                <thead>
                                                    <tr>
                                                        <th>Title</th>
                                                        <th>Publication</th>
                                                        <th>Comments</th>
                                                    </tr>
                                                </thead>
                                                <tbody></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>



<script src="~/Scripts/jquery-3.1.1.min.js" type="text/javascript"></script>
<script type="text/JavaScript">
    function tableRows(data) {
        var tableRows = [];
        for (var i = 0; i < data.length; i++) {
            tableRows.push(drawRow(data[i]));
        }
        return tableRows;
    };
    var UguidApproved = "@Model.guid";

    //Start by getting voucher list based on batch Id
        $.ajax({
            url: 'https://curationapi-d.kec.ac.ke/api/Publishers/approved',
            type: "GET",
            dataType: "json",
            data:{ guid: UguidApproved },
            success: function (data, status, jqhxr) {
            console.log(data);

            //This code snipet prepares to append Json Data
            $('#approved-List').append(tableRows(data));
        }
    });

    //This functionpopulates the tbody inner HTML with json data on call
    function drawRow(rowData) {
        var row = $("<tr />")
        row.append($("<td>" + rowData.title + "</td>"));
        row.append($("<td>" + rowData.url + "</td>"));
        row.append($("<td>" + rowData.notes + "</td>"));

        return row[0];
    }
</script>

<script type="text/JavaScript">
    function tableRows(data) {
        var tableRows = [];
        for (var i = 0; i < data.length; i++) {
            tableRows.push(drawRow(data[i]));
        }
        return tableRows;
    };
    var UguidConditional = "@Model.guid";
    //Start by getting voucher list based on batch Id
    $.ajax({
        url: 'https://curationapi-d.kec.ac.ke/api/Publishers/conditional',
        type: "GET",
        dataType: "json",
        data:{ guid: UguidConditional },
        success: function (data, status, jqhxr) {
            console.log(data);

            //This code snipet prepares to append Json Data
            $('#conditional-List').append(tableRows(data));
        }
    });

    //This functionpopulates the tbody inner HTML with json data on call
    function drawRow(rowData) {
        var row = $("<tr />")
        row.append($("<td>" + rowData.title + "</td>"));
        row.append($("<td>" + rowData.url + "</td>"));
        row.append($("<td>" + rowData.notes + "</td>"));

        return row[0];
    }
</script>

<script type="text/JavaScript">
    function tableRows(data) {
        var tableRows = [];
        for (var i = 0; i < data.length; i++) {
            tableRows.push(drawRow(data[i]));
        }
        return tableRows;
    };
   
    var UguidRejected= "@Model.guid";
    //Start by getting voucher list based on batch Id
    $.ajax({
        url: 'https://lcurationapi-d.kec.ac.ke/api/Publishers/rejected',
        type: "GET",
        dataType: "json",
        data:{ guid: UguidRejected },
        success: function (data, status, jqhxr) {
            console.log(data);

            //This code snipet prepares to append Json Data
            $('#rejected-List').append(tableRows(data));
        }
    });

    //This functionpopulates the tbody inner HTML with json data on call
    function drawRow(rowData) {
        var row = $("<tr />")
        row.append($("<td>" + rowData.title + "</td>"));
        row.append($("<td>" + rowData.url + "</td>"));
        row.append($("<td>" + rowData.notes + "</td>"));

        return row[0];
    }
</script>
